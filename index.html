<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>프랙탈 생성기</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-color: #282c34; /* 다크 모드 배경 */
            color: #abb2bf; /* 다크 모드 텍스트 색상 */
            font-family: Arial, sans-serif;
            
        }
        h1 {
            margin-bottom: 20px;
            color: #61afef; /* 다크 모드 제목 색상 */
        }
        canvas {
            border: 1px solid #5c6370;
            background-color: #21252b; /* 다크 모드 캔버스 배경 */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            margin-bottom: 20px;
        }
        .controls-panel {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 20px;
            padding: 15px;
            background-color: #3a404a;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            align-items: center;
            justify-content: center;
        }
        .controls-panel label,
        .controls-panel select,
        .controls-panel input[type="range"],
        .controls-panel input[type="color"],
        .controls-panel input[type="checkbox"] {
            color: #abb2bf;
            background-color: #4b525f;
            border: 1px solid #5c6370;
            border-radius: 4px;
            padding: 5px 8px;
        }
        .controls-panel select {
            padding-right: 25px; /* 드롭다운 화살표 공간 확보 */
        }
        .controls-panel input[type="range"] {
            width: 120px;
            -webkit-appearance: none;
            height: 8px;
            border-radius: 5px;
            background: #5c6370;
            outline: none;
            opacity: 0.7;
            transition: opacity .2s;
        }
        .controls-panel input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #61afef;
            cursor: pointer;
        }
        .controls-panel input[type="range"]::-moz-range-thumb {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #61afef;
            cursor: pointer;
        }
        .help-button {
            background-color: #61afef;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            margin-top: 20px;
            transition: background-color 0.3s ease;
        }
        .help-button:hover {
            background-color: #528bff;
        }
        .help-section {
            background-color: #3a404a;
            color: #abb2bf;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            max-width: 800px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            display: none; /* 기본적으로 숨김 */
        }
        .help-section h2 {
            color: #61afef;
            margin-top: 0;
        }
        .help-section p {
            margin-bottom: 10px;
        }

        /* 탭 스타일 */
        .tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
            background-color: #3a404a;
            border-radius: 8px;
            padding: 5px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .tab-button {
            background-color: #3a404a;
            color: #abb2bf;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            font-size: 1em;
            transition: background-color 0.3s ease, color 0.3s ease;
            border-radius: 5px;
            margin: 0 5px;
        }
        .tab-button:hover {
            background-color: #4b525f;
        }
        .tab-button.active {
            background-color: #61afef;
            color: white;
        }
        .tab-content {
            display: none;
            padding: 20px;
            background-color: #3a404a;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            max-width: 900px;
            width: 100%;
            box-sizing: border-box;
        }
        .tab-content h1, .tab-content h2 {
            color: #61afef;
            margin-top: 0;
        }
        .tab-content ul {
            list-style-type: disc;
            margin-left: 20px;
        }
        .tab-content li {
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <div class="tabs">
        <button class="tab-button active" onclick="openTab(event, 'fractalExperience')">프랙탈 체험</button>
        <button class="tab-button" onclick="openTab(event, 'aboutFractals')">프랙탈 정보</button>
    </div>

    <div id="fractalExperience" class="tab-content active">
        <h1>프랙탈 생성기</h1>
        <p id="fractalDescription" style="text-align: center; max-width: 800px; margin-bottom: 20px; line-height: 1.5;"></p>

        <div class="controls-panel">
            <div>
                <label for="fractalSelect">프랙탈 선택:</label>
                <select id="fractalSelect">
                    <option value="tree">프랙탈 트리</option>
                    <option value="sierpinski">시에르핀스키 삼각형</option>
                    <option value="mandelbrot">만델브로트 집합</option>
                </select>
            </div>
            <div id="fractalControls">
                <!-- 프랙탈별 컨트롤이 여기에 동적으로 추가됩니다 -->
            </div>
            <div>
                <label for="treeColor">색상:</label>
                <input type="color" id="treeColor" value="#8B4513">
            </div>
        </div>

        <canvas id="fractalCanvas"></canvas>
    </div>

    <div id="aboutFractals" class="tab-content">
        <h1>프랙탈이란?</h1>
        <p>프랙탈(Fractal)은 작은 부분이 전체와 비슷한 기하학적 형태로, 자기 유사성(self-similarity)을 특징으로 합니다. 이는 자연 현상에서 흔히 발견되며, 해안선, 구름, 나무, 혈관 등 다양한 곳에서 프랙탈 구조를 찾아볼 수 있습니다.</p>
        
        <h2>프랙탈의 특징</h2>
        <ul>
            <li><b>자기 유사성:</b> 어떤 부분을 확대해도 전체와 비슷한 모양이 반복됩니다.</li>
            <li><b>무한한 복잡성:</b> 아무리 확대해도 새로운 세부 구조가 계속 나타납니다.</li>
            <li><b>비정수 차원:</b> 일반적인 유클리드 기하학의 차원(1차원 선, 2차원 면, 3차원 입체)과는 다른 비정수 차원을 가집니다.</li>
        </ul>

        <h2>프랙탈의 활용</h2>
        <ul>
            <li><b>컴퓨터 그래픽스:</b> 자연 경관(산, 나무, 구름) 생성, 특수 효과 등에 활용됩니다.</li>
            <li><b>과학 및 공학:</b> 안테나 설계, 이미지 압축, 의학 영상 분석, 주식 시장 분석 등 다양한 분야에서 응용됩니다.</li>
            <li><b>예술 및 디자인:</b> 독특하고 아름다운 시각적 패턴을 생성하는 데 사용됩니다.</li>
        </ul>
    </div>

    <script>
        // 탭 전환 기능
        function openTab(evt, tabName) {
            var i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName("tab-content");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
            }
            tablinks = document.getElementsByClassName("tab-button");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].className = tablinks[i].className.replace(" active", "");
            }
            document.getElementById(tabName).style.display = "block";
            evt.currentTarget.className += " active";
        }

        // 초기 로드 시 '프랙탈 체험' 탭 활성화
        document.addEventListener('DOMContentLoaded', (event) => {
            document.querySelector('.tab-button').click();
        });

        // 기존 프랙탈 생성기 스크립트 (여기에 추가될 예정)
    // 기존 프랙탈 생성기 스크립트 (여기에 추가될 예정)
        const canvas = document.getElementById('fractalCanvas');
        const ctx = canvas.getContext('2d');
        const fractalSelect = document.getElementById('fractalSelect');
        const fractalControls = document.getElementById('fractalControls');
        const fractalDescription = document.getElementById('fractalDescription');

        let currentFractal = 'tree';
        let treeDepth = 5;
        let treeAngle = 30;
        let treeLengthRatio = 0.7;
        let treeColor = '#8B4513';

        let sierpinskiDepth = 5;

        let mandelbrotIterations = 50;
        let mandelbrotZoom = 1;
        let mandelbrotOffsetX = -0.5;
        let mandelbrotOffsetY = 0;

        canvas.width = 800;
        canvas.height = 600;

        function drawFractal() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = '#21252b';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            switch (currentFractal) {
                case 'tree':
                    drawTree(canvas.width / 2, canvas.height, treeLengthRatio * 150, -90, treeDepth);
                    fractalDescription.textContent = "프랙탈 트리는 자기 유사성을 가진 나무 모양의 프랙탈입니다. 가지가 반복적으로 분기하며 전체 나무의 형태를 이룹니다.";
                    break;
                case 'sierpinski':
                    drawSierpinski(0, canvas.height, canvas.width, sierpinskiDepth);
                    fractalDescription.textContent = "시에르핀스키 삼각형은 정삼각형에서 중앙의 역삼각형을 계속해서 제거해나가는 방식으로 만들어지는 프랙탈입니다. 무한히 반복되는 구멍이 특징입니다.";
                    break;
                case 'mandelbrot':
                    drawMandelbrot();
                    fractalDescription.textContent = "만델브로트 집합은 복소평면에서 특정 조건을 만족하는 점들의 집합으로, 매우 복잡하고 아름다운 경계를 가집니다. 확대할수록 새로운 패턴이 드러납니다.";
                    break;
            }
        }

        function drawTree(startX, startY, length, angle, depth) {
            if (depth === 0) return;

            const endX = startX + length * Math.cos(angle * Math.PI / 180);
            const endY = startY + length * Math.sin(angle * Math.PI / 180);

            ctx.beginPath();
            ctx.moveTo(startX, startY);
            ctx.lineTo(endX, endY);
            ctx.strokeStyle = treeColor;
            ctx.lineWidth = depth / 2 + 0.5;
            ctx.stroke();

            drawTree(endX, endY, length * treeLengthRatio, angle + treeAngle, depth - 1);
            drawTree(endX, endY, length * treeLengthRatio, angle - treeAngle, depth - 1);
        }

        function drawSierpinski(x, y, size, depth) {
            if (depth === 0) {
                ctx.fillStyle = '#61afef';
                ctx.beginPath();
                ctx.moveTo(x, y);
                ctx.lineTo(x + size, y);
                ctx.lineTo(x + size / 2, y - (Math.sqrt(3) / 2) * size);
                ctx.closePath();
                ctx.fill();
                return;
            }

            const h = (Math.sqrt(3) / 2) * size;
            drawSierpinski(x, y, size / 2, depth - 1);
            drawSierpinski(x + size / 2, y, size / 2, depth - 1);
            drawSierpinski(x + size / 4, y - h / 2, size / 2, depth - 1);
        }

        function drawMandelbrot() {
            const MAX_ITERATIONS = mandelbrotIterations;
            const ZOOM = mandelbrotZoom;
            const OFFSET_X = mandelbrotOffsetX;
            const OFFSET_Y = mandelbrotOffsetY;

            for (let x = 0; x < canvas.width; x++) {
                for (let y = 0; y < canvas.height; y++) {
                    let a = (x / canvas.width) * (3.5 / ZOOM) - (2.5 / ZOOM) + OFFSET_X;
                    let b = (y / canvas.height) * (2 / ZOOM) - (1 / ZOOM) + OFFSET_Y;
                    let ca = a;
                    let cb = b;
                    let n = 0;

                    while (n < MAX_ITERATIONS) {
                        const aa = a * a;
                        const bb = b * b;
                        if (aa + bb > 4) break;
                        const twoab = 2 * a * b;
                        a = aa - bb + ca;
                        b = twoab + cb;
                        n++;
                    }

                    const color = n === MAX_ITERATIONS ? '#000' : `hsl(${n * 360 / MAX_ITERATIONS}, 100%, 50%)`;
                    ctx.fillStyle = color;
                    ctx.fillRect(x, y, 1, 1);
                }
            }
        }

        function updateControls() {
            fractalControls.innerHTML = '';
            const treeColorControl = document.getElementById('treeColor');
            if (treeColorControl) {
                treeColor = treeColorControl.value;
            }

            switch (currentFractal) {
                case 'tree':
                    fractalControls.innerHTML = `
                        <div>
                            <label for="treeDepth">깊이:</label>
                            <input type="range" id="treeDepth" min="1" max="10" value="${treeDepth}">
                        </div>
                        <div>
                            <label for="treeAngle">각도:</label>
                            <input type="range" id="treeAngle" min="0" max="90" value="${treeAngle}">
                        </div>
                        <div>
                            <label for="treeLengthRatio">길이 비율:</label>
                            <input type="range" id="treeLengthRatio" min="0.1" max="0.9" step="0.05" value="${treeLengthRatio}">
                        </div>
                    `;
                    document.getElementById('treeDepth').addEventListener('input', (e) => { treeDepth = parseInt(e.target.value); drawFractal(); });
                    document.getElementById('treeAngle').addEventListener('input', (e) => { treeAngle = parseInt(e.target.value); drawFractal(); });
                    document.getElementById('treeLengthRatio').addEventListener('input', (e) => { treeLengthRatio = parseFloat(e.target.value); drawFractal(); });
                    break;
                case 'sierpinski':
                    fractalControls.innerHTML = `
                        <div>
                            <label for="sierpinskiDepth">깊이:</label>
                            <input type="range" id="sierpinskiDepth" min="1" max="8" value="${sierpinskiDepth}">
                        </div>
                    `;
                    document.getElementById('sierpinskiDepth').addEventListener('input', (e) => { sierpinskiDepth = parseInt(e.target.value); drawFractal(); });
                    break;
                case 'mandelbrot':
                    fractalControls.innerHTML = `
                        <div>
                            <label for="mandelbrotIterations">반복 횟수:</label>
                            <input type="range" id="mandelbrotIterations" min="10" max="200" value="${mandelbrotIterations}">
                        </div>
                        <div>
                            <label for="mandelbrotZoom">확대:</label>
                            <input type="range" id="mandelbrotZoom" min="0.1" max="10" step="0.1" value="${mandelbrotZoom}">
                        </div>
                        <div>
                            <label for="mandelbrotOffsetX">X 오프셋:</label>
                            <input type="range" id="mandelbrotOffsetX" min="-2" max="2" step="0.01" value="${mandelbrotOffsetX}">
                        </div>
                        <div>
                            <label for="mandelbrotOffsetY">Y 오프셋:</label>
                            <input type="range" id="mandelbrotOffsetY" min="-1.5" max="1.5" step="0.01" value="${mandelbrotOffsetY}">
                        </div>
                    `;
                    document.getElementById('mandelbrotIterations').addEventListener('input', (e) => { mandelbrotIterations = parseInt(e.target.value); drawFractal(); });
                    document.getElementById('mandelbrotZoom').addEventListener('input', (e) => { mandelbrotZoom = parseFloat(e.target.value); drawFractal(); });
                    document.getElementById('mandelbrotOffsetX').addEventListener('input', (e) => { mandelbrotOffsetX = parseFloat(e.target.value); drawFractal(); });
                    document.getElementById('mandelbrotOffsetY').addEventListener('input', (e) => { mandelbrotOffsetY = parseFloat(e.target.value); drawFractal(); });
                    break;
            }
            drawFractal();
        }

        fractalSelect.addEventListener('change', (e) => {
            currentFractal = e.target.value;
            updateControls();
        });

        document.getElementById('treeColor').addEventListener('input', (e) => {
            treeColor = e.target.value;
            if (currentFractal === 'tree') {
                drawFractal();
            }
        });

        updateControls();

    </script>
</body>
</html>